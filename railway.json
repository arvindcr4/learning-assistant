{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "DOCKERFILE",
    "dockerfilePath": "Dockerfile.railway"
  },
  "deploy": {
    "numReplicas": 1,
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 3,
    "sleepApplication": false,
    "cronSchedule": "",
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 300,
    "watchPatterns": [
      "src/**/*",
      "app/**/*",
      "package.json",
      "package-lock.json",
      "next.config.ts",
      "tailwind.config.js",
      "tsconfig.json"
    ]
  },
  "environments": {
    "production": {
      "variables": {
        "NODE_ENV": "production",
        "NEXT_TELEMETRY_DISABLED": "1",
        "PORT": "3000",
        "DATABASE_URL": "${{Postgres.DATABASE_URL}}",
        "DB_HOST": "${{Postgres.PGHOST}}",
        "DB_PORT": "${{Postgres.PGPORT}}",
        "DB_NAME": "${{Postgres.PGDATABASE}}",
        "DB_USER": "${{Postgres.PGUSER}}",
        "DB_PASSWORD": "${{Postgres.PGPASSWORD}}",
        "DB_SSL": "true",
        "DB_MAX_CONNECTIONS": "20",
        "DB_IDLE_TIMEOUT": "30000",
        "DB_CONNECTION_TIMEOUT": "10000",
        "REDIS_URL": "${{Redis.REDIS_URL}}",
        "REDIS_HOST": "${{Redis.REDIS_HOST}}",
        "REDIS_PORT": "${{Redis.REDIS_PORT}}",
        "REDIS_PASSWORD": "${{Redis.REDIS_PASSWORD}}",
        "NEXTAUTH_URL": "${{RAILWAY_STATIC_URL}}",
        "NEXTAUTH_SECRET": "${{NEXTAUTH_SECRET}}",
        "BETTER_AUTH_SECRET": "${{BETTER_AUTH_SECRET}}",
        "BETTER_AUTH_URL": "${{RAILWAY_STATIC_URL}}",
        "OPENAI_API_KEY": "${{OPENAI_API_KEY}}",
        "ANTHROPIC_API_KEY": "${{ANTHROPIC_API_KEY}}",
        "AI_PROVIDER": "openai",
        "AI_MODEL": "gpt-4o-mini",
        "AI_TEMPERATURE": "0.7",
        "AI_MAX_TOKENS": "2000",
        "RATE_LIMIT_MAX_REQUESTS": "100",
        "RATE_LIMIT_WINDOW_SIZE": "900000",
        "CACHE_TTL": "1800",
        "CACHE_MAX_SIZE": "1000",
        "LOG_LEVEL": "info",
        "LOG_FORMAT": "json",
        "METRICS_ENABLED": "true",
        "METRICS_PORT": "9090",
        "SENTRY_DSN": "${{SENTRY_DSN}}",
        "SENTRY_ENVIRONMENT": "production",
        "ENCRYPTION_KEY": "${{ENCRYPTION_KEY}}",
        "JWT_SECRET": "${{JWT_SECRET}}",
        "SESSION_SECRET": "${{SESSION_SECRET}}",
        "CORS_ORIGINS": "${{RAILWAY_STATIC_URL}}",
        "ALLOWED_ORIGINS": "${{RAILWAY_STATIC_URL}}",
        "SECURITY_HEADERS_ENABLED": "true",
        "CSRF_PROTECTION_ENABLED": "true",
        "HELMET_ENABLED": "true",
        "BACKUP_ENABLED": "true",
        "BACKUP_SCHEDULE": "0 2 * * *",
        "BACKUP_RETENTION_DAYS": "30",
        "MONITORING_ENABLED": "true",
        "HEALTH_CHECK_ENABLED": "true",
        "HEALTH_CHECK_INTERVAL": "30000",
        "PERFORMANCE_MONITORING": "true",
        "ERROR_REPORTING": "true",
        "ANALYTICS_ENABLED": "true",
        "FEATURE_FLAGS_ENABLED": "true",
        "MAINTENANCE_MODE": "false",
        "DEBUG_MODE": "false",
        "VERBOSE_LOGGING": "false",
        "COMPRESSION_ENABLED": "true",
        "GZIP_COMPRESSION": "true",
        "STATIC_CACHE_MAX_AGE": "31536000",
        "API_CACHE_MAX_AGE": "0",
        "CDN_ENABLED": "false",
        "IMAGE_OPTIMIZATION": "true",
        "LAZY_LOADING": "true",
        "SERVICE_WORKER_ENABLED": "true",
        "PWA_ENABLED": "false",
        "OFFLINE_SUPPORT": "false",
        "PRERENDER_ENABLED": "true",
        "SSR_ENABLED": "true",
        "ISR_ENABLED": "true",
        "EDGE_RUNTIME": "false",
        "TURBO_ENABLED": "false",
        "BUNDLE_ANALYZER": "false",
        "LIGHTHOUSE_CI": "false",
        "PERFORMANCE_BUDGET": "true",
        "ACCESSIBILITY_TESTING": "true",
        "SEO_OPTIMIZATION": "true",
        "INTERNATIONALIZATION": "true",
        "DEFAULT_LOCALE": "en",
        "SUPPORTED_LOCALES": "en,es,fr,de,ja,ar",
        "TIMEZONE": "UTC",
        "DATE_FORMAT": "ISO",
        "CURRENCY": "USD",
        "NOTIFICATION_ENABLED": "true",
        "EMAIL_ENABLED": "false",
        "SMS_ENABLED": "false",
        "PUSH_NOTIFICATIONS": "false",
        "WEBSOCKET_ENABLED": "false",
        "REALTIME_ENABLED": "false",
        "CHAT_ENABLED": "true",
        "FILE_UPLOAD_ENABLED": "true",
        "FILE_UPLOAD_MAX_SIZE": "10485760",
        "FILE_UPLOAD_ALLOWED_TYPES": "image/*,application/pdf,text/*",
        "CONTENT_SECURITY_POLICY": "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https:; frame-ancestors 'self';",
        "RATE_LIMITING_ENABLED": "true",
        "DDOS_PROTECTION": "true",
        "IP_WHITELIST": "",
        "IP_BLACKLIST": "",
        "GEO_BLOCKING": "false",
        "BLOCKED_COUNTRIES": "",
        "ALLOWED_COUNTRIES": "",
        "SPAM_PROTECTION": "true",
        "CAPTCHA_ENABLED": "false",
        "TWO_FACTOR_AUTH": "false",
        "OAUTH_ENABLED": "true",
        "SOCIAL_LOGIN_ENABLED": "false",
        "LDAP_ENABLED": "false",
        "SAML_ENABLED": "false",
        "RBAC_ENABLED": "true",
        "AUDIT_LOGGING": "true",
        "COMPLIANCE_MODE": "false",
        "GDPR_COMPLIANCE": "true",
        "CCPA_COMPLIANCE": "true",
        "HIPAA_COMPLIANCE": "false",
        "DATA_RETENTION_DAYS": "365",
        "COOKIE_CONSENT": "true",
        "PRIVACY_POLICY_URL": "/privacy",
        "TERMS_OF_SERVICE_URL": "/terms",
        "SUPPORT_EMAIL": "support@example.com",
        "ADMIN_EMAIL": "admin@example.com",
        "CONTACT_EMAIL": "contact@example.com",
        "COMPANY_NAME": "Learning Assistant",
        "APP_NAME": "Learning Assistant",
        "APP_DESCRIPTION": "AI-powered personalized learning assistant",
        "APP_VERSION": "1.0.0",
        "APP_KEYWORDS": "learning,education,ai,personalized,tutoring",
        "APP_AUTHOR": "Learning Assistant Team",
        "APP_URL": "${{RAILWAY_STATIC_URL}}",
        "API_VERSION": "v1",
        "API_PREFIX": "/api",
        "DOCS_ENABLED": "true",
        "DOCS_URL": "/docs",
        "SWAGGER_ENABLED": "true",
        "SWAGGER_URL": "/swagger",
        "GRAPHQL_ENABLED": "false",
        "GRAPHQL_URL": "/graphql",
        "WEBHOOK_ENABLED": "false",
        "WEBHOOK_SECRET": "${{WEBHOOK_SECRET}}",
        "INTEGRATION_ENABLED": "true",
        "THIRD_PARTY_APIS": "true",
        "EXTERNAL_SERVICES": "true",
        "MICROSERVICES": "false",
        "SERVERLESS": "false",
        "EDGE_FUNCTIONS": "false",
        "BACKGROUND_JOBS": "false",
        "QUEUE_ENABLED": "false",
        "CRON_JOBS": "false",
        "SCHEDULED_TASKS": "false",
        "WORKER_PROCESSES": "1",
        "CLUSTER_MODE": "false",
        "LOAD_BALANCING": "false",
        "AUTO_SCALING": "false",
        "HORIZONTAL_SCALING": "false",
        "VERTICAL_SCALING": "false",
        "RESOURCE_LIMITS": "true",
        "MEMORY_LIMIT": "512Mi",
        "CPU_LIMIT": "0.5",
        "DISK_LIMIT": "1Gi",
        "NETWORK_LIMIT": "100Mbps",
        "CONCURRENT_REQUESTS": "100",
        "REQUEST_TIMEOUT": "30000",
        "KEEP_ALIVE_TIMEOUT": "5000",
        "BODY_PARSER_LIMIT": "10mb",
        "URL_ENCODED_LIMIT": "10mb",
        "JSON_LIMIT": "10mb",
        "MULTIPART_LIMIT": "50mb",
        "UPLOAD_TIMEOUT": "300000",
        "DOWNLOAD_TIMEOUT": "300000",
        "STREAM_TIMEOUT": "300000",
        "SOCKET_TIMEOUT": "300000",
        "CONNECTION_TIMEOUT": "30000",
        "IDLE_TIMEOUT": "30000",
        "GRACEFUL_SHUTDOWN_TIMEOUT": "30000",
        "SHUTDOWN_TIMEOUT": "60000",
        "STARTUP_TIMEOUT": "60000",
        "READY_TIMEOUT": "60000",
        "LIVENESS_PROBE_TIMEOUT": "5000",
        "READINESS_PROBE_TIMEOUT": "5000",
        "STARTUP_PROBE_TIMEOUT": "60000"
      }
    },
    "staging": {
      "variables": {
        "NODE_ENV": "staging",
        "NEXT_TELEMETRY_DISABLED": "1",
        "PORT": "3000",
        "DATABASE_URL": "${{Postgres.DATABASE_URL}}",
        "DB_HOST": "${{Postgres.PGHOST}}",
        "DB_PORT": "${{Postgres.PGPORT}}",
        "DB_NAME": "${{Postgres.PGDATABASE}}",
        "DB_USER": "${{Postgres.PGUSER}}",
        "DB_PASSWORD": "${{Postgres.PGPASSWORD}}",
        "DB_SSL": "true",
        "DB_MAX_CONNECTIONS": "10",
        "DB_IDLE_TIMEOUT": "30000",
        "DB_CONNECTION_TIMEOUT": "10000",
        "REDIS_URL": "${{Redis.REDIS_URL}}",
        "REDIS_HOST": "${{Redis.REDIS_HOST}}",
        "REDIS_PORT": "${{Redis.REDIS_PORT}}",
        "REDIS_PASSWORD": "${{Redis.REDIS_PASSWORD}}",
        "NEXTAUTH_URL": "${{RAILWAY_STATIC_URL}}",
        "NEXTAUTH_SECRET": "${{NEXTAUTH_SECRET}}",
        "BETTER_AUTH_SECRET": "${{BETTER_AUTH_SECRET}}",
        "BETTER_AUTH_URL": "${{RAILWAY_STATIC_URL}}",
        "OPENAI_API_KEY": "${{OPENAI_API_KEY}}",
        "ANTHROPIC_API_KEY": "${{ANTHROPIC_API_KEY}}",
        "AI_PROVIDER": "openai",
        "AI_MODEL": "gpt-4o-mini",
        "AI_TEMPERATURE": "0.7",
        "AI_MAX_TOKENS": "2000",
        "RATE_LIMIT_MAX_REQUESTS": "50",
        "RATE_LIMIT_WINDOW_SIZE": "900000",
        "CACHE_TTL": "600",
        "CACHE_MAX_SIZE": "500",
        "LOG_LEVEL": "debug",
        "LOG_FORMAT": "json",
        "METRICS_ENABLED": "true",
        "METRICS_PORT": "9090",
        "SENTRY_DSN": "${{SENTRY_DSN}}",
        "SENTRY_ENVIRONMENT": "staging",
        "DEBUG_MODE": "true",
        "VERBOSE_LOGGING": "true",
        "MEMORY_LIMIT": "256Mi",
        "CPU_LIMIT": "0.25",
        "DISK_LIMIT": "512Mi"
      }
    },
    "development": {
      "variables": {
        "NODE_ENV": "development",
        "NEXT_TELEMETRY_DISABLED": "1",
        "PORT": "3000",
        "DATABASE_URL": "${{Postgres.DATABASE_URL}}",
        "DB_HOST": "${{Postgres.PGHOST}}",
        "DB_PORT": "${{Postgres.PGPORT}}",
        "DB_NAME": "${{Postgres.PGDATABASE}}",
        "DB_USER": "${{Postgres.PGUSER}}",
        "DB_PASSWORD": "${{Postgres.PGPASSWORD}}",
        "DB_SSL": "false",
        "DB_MAX_CONNECTIONS": "5",
        "DB_IDLE_TIMEOUT": "30000",
        "DB_CONNECTION_TIMEOUT": "10000",
        "REDIS_URL": "${{Redis.REDIS_URL}}",
        "REDIS_HOST": "${{Redis.REDIS_HOST}}",
        "REDIS_PORT": "${{Redis.REDIS_PORT}}",
        "REDIS_PASSWORD": "${{Redis.REDIS_PASSWORD}}",
        "NEXTAUTH_URL": "${{RAILWAY_STATIC_URL}}",
        "NEXTAUTH_SECRET": "${{NEXTAUTH_SECRET}}",
        "BETTER_AUTH_SECRET": "${{BETTER_AUTH_SECRET}}",
        "BETTER_AUTH_URL": "${{RAILWAY_STATIC_URL}}",
        "OPENAI_API_KEY": "${{OPENAI_API_KEY}}",
        "ANTHROPIC_API_KEY": "${{ANTHROPIC_API_KEY}}",
        "AI_PROVIDER": "openai",
        "AI_MODEL": "gpt-4o-mini",
        "AI_TEMPERATURE": "0.7",
        "AI_MAX_TOKENS": "1000",
        "RATE_LIMIT_MAX_REQUESTS": "20",
        "RATE_LIMIT_WINDOW_SIZE": "900000",
        "CACHE_TTL": "300",
        "CACHE_MAX_SIZE": "100",
        "LOG_LEVEL": "debug",
        "LOG_FORMAT": "pretty",
        "METRICS_ENABLED": "false",
        "SENTRY_DSN": "${{SENTRY_DSN}}",
        "SENTRY_ENVIRONMENT": "development",
        "DEBUG_MODE": "true",
        "VERBOSE_LOGGING": "true",
        "MEMORY_LIMIT": "128Mi",
        "CPU_LIMIT": "0.1",
        "DISK_LIMIT": "256Mi"
      }
    }
  }
}